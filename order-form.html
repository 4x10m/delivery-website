
<html>
<meta charset="utf8">
<body>


	Adresse de départ
	<input type="text" id="pac-input">

	<div id="infowindow-content">
      <img src="" width="16" height="16" id="place-icon">
      <span id="place-name"  class="title"></span><br>
      <span id="place-address"></span>
    </div>


	Addresse d'arrivée
	<input type="text" id="pac-input-2">

	<div id="infowindow-content-2">
      <img src="" width="16" height="16" id="place-icon-2">
      <span id="place-name-2"  class="title"></span><br>
      <span id="place-address-2"></span>
    </div>

	<div id="map" style="height: 400px;width: 100%;"></div>

    <script>
    	var map;
    	

		function initMap() {
			map = new google.maps.Map(
			document.getElementById('map'), { zoom: 4, center: { lat: 42, lng: 2 }});

			var input = document.getElementById('pac-input');
			var autocomplete = new google.maps.places.Autocomplete(input);
			autocomplete.bindTo('bounds', map);
			autocomplete.setFields(['address_components', 'geometry', 'icon', 'name']);
            autocomplete.setTypes([]);

	        var infowindow = new google.maps.InfoWindow();
	        var infowindowContent = document.getElementById('infowindow-content');
	        infowindow.setContent(infowindowContent);

	        var input2 = document.getElementById('pac-input-2');
			var autocomplete2 = new google.maps.places.Autocomplete(input2);
			autocomplete2.setFields(['address_components', 'geometry', 'icon', 'name']);
            autocomplete2.setTypes([]);

           	var infowindow2 = new google.maps.InfoWindow();
	        var infowindowContent2 = document.getElementById('infowindow-content-2');
	        infowindow2.setContent(infowindowContent2);

	        var marker = new google.maps.Marker({position: {lat: -25.344, lng: 131.036}, map: map});
	       	var marker2 = new google.maps.Marker({position: {lat: -25.344, lng: 131.036}, map: map});

			autocomplete.addListener('place_changed', function() {
	          infowindow.close();
	          marker.setVisible(false);
	          var place = autocomplete.getPlace();
	          if (!place.geometry) {
	            // User entered the name of a Place that was not suggested and
	            // pressed the Enter key, or the Place Details request failed.
	            window.alert("No details available for input: '" + place.name + "'");
	            return;
	          }

	          // If the place has a geometry, then present it on a map.
	          if (place.geometry.viewport) {
	            map.fitBounds(place.geometry.viewport);
	          } else {
	            map.setCenter(place.geometry.location);
	            map.setZoom(17);  // Why 17? Because it looks good.
	          }
	          marker.setPosition(place.geometry.location);
	          marker.setVisible(true);

	          var address = '';
	          if (place.address_components) {
	            address = [
	              (place.address_components[0] && place.address_components[0].short_name || ''),
	              (place.address_components[1] && place.address_components[1].short_name || ''),
	              (place.address_components[2] && place.address_components[2].short_name || '')
	            ].join(' ');
	          }

	          infowindowContent.children['place-icon'].src = place.icon;
	          infowindowContent.children['place-name'].textContent = place.name;
	          infowindowContent.children['place-address'].textContent = address;
	          infowindow.open(map, marker);
	        });

			autocomplete2.addListener('place_changed', function() {
	          infowindow2.close();
	          marker2.setVisible(false);
	          var place = autocomplete2.getPlace();
	          if (!place.geometry) {
	            // User entered the name of a Place that was not suggested and
	            // pressed the Enter key, or the Place Details request failed.
	            window.alert("No details available for input: '" + place.name + "'");
	            return;
	          }

	          // If the place has a geometry, then present it on a map.
/*	          if (place.geometry.viewport) {
	            map.fitBounds(place.geometry.viewport);
	          } else {
	            map.setCenter(place.geometry.location);
	            map.setZoom(17);  // Why 17? Because it looks good.
	          }*/
	          marker2.setPosition(place.geometry.location);
	          marker2.setVisible(true);

	          var address = '';
	          if (place.address_components) {
	            address = [
	              (place.address_components[0] && place.address_components[0].short_name || ''),
	              (place.address_components[1] && place.address_components[1].short_name || ''),
	              (place.address_components[2] && place.address_components[2].short_name || '')
	            ].join(' ');
	          }

	          infowindowContent2.children['place-icon-2'].src = place.icon;
	          infowindowContent2.children['place-name-2'].textContent = place.name;
	          infowindowContent2.children['place-address-2'].textContent = address;
	          infowindow2.open(map, marker2);
	        });
		}

		function addMarker() {
			var marker = new google.maps.Marker({position: {lat: -25.344, lng: 131.036}, map: map});
		}

		//https://www.geodatasource.com/developers/javascript
		function distance(lat1, lon1, lat2, lon2, unit) {
			var radlat1 = Math.PI * lat1/180
			var radlat2 = Math.PI * lat2/180
			var theta = lon1-lon2
			var radtheta = Math.PI * theta/180
			var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
			if (dist > 1) {
				dist = 1;
			}
			dist = Math.acos(dist)
			dist = dist * 180/Math.PI
			dist = dist * 60 * 1.1515 // Miles
			if (unit=="K") { dist = dist * 1.609344 } // Kilometers
			if (unit=="N") { dist = dist * 0.8684 } // Nautical
			return dist
		}
	</script>

	<script async defer
    src="https://maps.googleapis.com/maps/api/js?libraries=places&callback=initMap">
    </script>

</body>
    </html>